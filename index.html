<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXT-HUB | News Integration</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #0d0d0d;
            --bg-card: #181818;
            --text-main: #ffffff;
            --text-sub: #a0a0a0;
            --border-color: #2c2c2c;
            --scratch-blue: #4d97ff;
            --accent-green: #2ecc71;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', 'Noto Sans JP', sans-serif; background-color: var(--bg-body); color: var(--text-main); line-height: 1.6; }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        nav { padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; background: rgba(13, 13, 13, 0.9); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border-color); }
        .logo { font-weight: 700; font-size: 1.2rem; cursor: pointer; }
        .nav-links { display: flex; gap: 20px; }
        .nav-links span { cursor: pointer; font-size: 0.9rem; transition: 0.3s; }
        .nav-links span:hover { color: var(--scratch-blue); }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header { text-align: center; padding: 40px 20px; border-bottom: 1px solid var(--border-color); }
        #weather-text { color: var(--accent-green); font-weight: bold; margin-bottom: 10px; }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .container { max-width: 1200px; margin: 0 auto; padding: 30px 5%; }
        .section-title { margin-bottom: 20px; border-left: 4px solid var(--scratch-blue); padding-left: 15px; }

        /* ãƒ‹ãƒ¥ãƒ¼ã‚¹é …ç›®ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã”æç¤ºã®ã‚³ãƒ¼ãƒ‰ã®åæ˜ ï¼‰ */
        .news-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .news-item { background: var(--bg-card); border: 1px solid var(--border-color); padding: 20px; border-radius: 12px; transition: 0.3s; }
        .news-item:hover { border-color: var(--scratch-blue); transform: translateY(-3px); }
        .news-item h3 { font-size: 1rem; margin-bottom: 10px; }
        .news-item h3 a { color: var(--text-main); text-decoration: none; }
        .news-item h3 a:hover { color: var(--scratch-blue); }
        .news-item p { font-size: 0.85rem; color: var(--text-sub); margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .news-item small { color: var(--scratch-blue); font-weight: bold; }

        /* éš ã—åˆ¶å¾¡ */
        .page { display: none; }
        .active { display: block; }
    </style>
</head>
<body>

    <nav>
        <div class="logo" onclick="showPage('home')">NEXT-HUB</div>
        <div class="nav-links">
            <span onclick="showPage('home')">ğŸ  Home</span>
            <span onclick="showPage('news')">ğŸ“° News</span>
        </div>
    </nav>

    <header>
        <div id="weather-text">Weather Loading...</div>
        <h1>Portal Dashboard</h1>
    </header>

    <main class="container">
        <div id="home-page" class="page active">
            <h2 class="section-title">Projects</h2>
            <p>ã“ã“ã«Scratchä½œå“ãªã©ã®ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
            </div>

        <div id="news-page" class="page">
            <h2 class="section-title">Latest Technology News</h2>
            <div id="news-container" class="news-grid">
                <p>ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            </div>
        </div>
    </main>

    <script>
        // --- è¨­å®š ---
        const apiKey = '312c3568831b4fb588b1ab9daeeecd1f';
        
        // NewsAPIã®ç„¡æ–™ç‰ˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€ãƒ—ãƒ­ã‚­ã‚·ã‚’é€šã—ã¾ã™
        const proxy = "https://api.allorigins.win/raw?url=";
        const targetUrl = `https://newsapi.org/v2/top-headlines?country=jp&category=technology&apiKey=${apiKey}`;
        const finalUrl = proxy + encodeURIComponent(targetUrl);

        // ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId + '-page').classList.add('active');
            if(pageId === 'news') getNews();
        }

        // --- ã‚ãªãŸãŒæç¤ºã—ãŸãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—é–¢æ•° (ä¿®æ­£ç‰ˆ) ---
        async function getNews() {
            const container = document.getElementById('news-container');
            
            try {
                const response = await fetch(finalUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log(data.articles); 
                displayNews(data.articles); 
            } catch (error) {
                console.error('ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                container.innerHTML = `<p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ç½®ã„ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚<br><small>${error.message}</small></p>`;
            }
        }

        // --- ã‚ãªãŸãŒæç¤ºã—ãŸãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤ºé–¢æ•° ---
        function displayNews(articles) {
            const container = document.getElementById('news-container');
            container.innerHTML = ''; 

            if (!articles || articles.length === 0) {
                container.innerHTML = '<p>è¡¨ç¤ºã§ãã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }

            articles.forEach(article => {
                const newsItem = `
                    <div class="news-item">
                        <h3><a href="${article.url}" target="_blank">${article.title}</a></h3>
                        <p>${article.description || 'è©³ç´°æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚'}</p>
                        <small>${article.source.name} - ${new Date(article.publishedAt).toLocaleDateString()}</small>
                    </div>
                `;
                container.innerHTML += newsItem;
            });
        }

        // å¤©æ°—å–å¾— (Open-Meteo)
        async function getWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=35.68&longitude=139.76&current_weather=true');
                const d = await res.json();
                document.getElementById('weather-text').innerText = `Tokyo: ${d.current_weather.temperature}Â°C`;
            } catch (e) {
                document.getElementById('weather-text').innerText = "Weather: N/A";
            }
        }

        // åˆæœŸå®Ÿè¡Œ
        window.onload = () => {
            getWeather();
        };
    </script>
</body>
</html>
